window.__require=function e(t,s,i){function o(a,r){if(!s[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(n)return n(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=s[a]={exports:{}};t[a][0].call(u.exports,function(e){return o(t[a][1][e]||e)},u,u.exports,e,t,s,i)}return s[a].exports}for(var n="function"==typeof __require&&__require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t){var s="en",i="ja",o={jp:{play:"\u30b9\u30bf\u30fc\u30c8"},en:{play:"Play Now!"}},n=500;function a(){this._isInitialised=!1,this._splashAdShown=!1}function r(e){for(var t in e=e||{})void 0===e[t]&&delete e[t];return e}function c(e,t){console.error(e),(t=t||{}).noBreak?t.noBreak():(t.beforeBreak&&t.beforeBreak(),t.afterBreak&&t.afterBreak())}function l(){if(!navigator.language)return i;let e=navigator.language.toLowerCase().substr(0,2);return o[e]?e:s}a.prototype.initialize=function(e){if(this._isInitialised)console.warn("h5ad: already initialized");else{if(this._isInitialised=!0,e&&void 0!==e.adBreakTimeout&&(n=e.adBreakTimeout),!window.adsbygoogle){var t=document.createElement("script");t.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t.setAttribute("data-ad-client","ca-pub-123456789"),t.setAttribute("data-adbreak-test","on"),t.async=!0,document.head.appendChild(t),window.adsbygoogle=window.adsbygoogle||[],adBreak=window.adBreak=function(e){console.log("adBreak:",e),window.adsbygoogle.push(e)},adConfig=window.adConfig=function(e){console.log("adConfig:",e),window.adsbygoogle.push(e)}}adConfig({sound:"on"})}},a.prototype.onStart=function(e){if(e=e||{},this._isInitialised||this.initialize({adBreakTimeout:e.adBreakTimeout}),this._splashAdShown)console.warn("h5ad: onStart has already been called");else{this._splashAdShown=!0;var t="";t+=".splahContainer {",t+="    background-color: black;",t+="    position: absolute;",t+="    width: 100%;",t+="    height: 100%;",t+="    text-align: left;",t+="}",t+=".splahContainer .gameIcon {",t+="    position: relative;",t+="    width: 100px;",t+="    height: 100px;",t+="    background-size: 100%;",t+="    transform: translate(-50%, -50%);",t+="    left: 50%;",t+="    top: 15%;",t+="    border-radius: 10px;",t+="    border: 2px white solid;",t+="    border-radius: min(2vh,2vw);",t+="    border: min(0.7vw, 0.7vh) white solid;",t+="    width: min(30vw, 20vh);",t+="    height: min(30vw, 20vh);",t+="}",t+=".splahContainer .startButton {",t+="    background-color: rgb(255, 193, 7);",t+="    display: inline-block;",t+="    padding: 20px 30px;",t+="    border-radius: 13px;",t+="    transform: translate(-50%, -50%);",t+="    left: 50%;",t+="    top: 55%;",t+="    border: 5px solid white;",t+="    position: relative;",t+="    cursor: pointer;",t+="    font-size: 26px;",t+="    font-family: arial, verdana;",t+="    color: white;",t+="    text-align: center;",t+="    transition: all 0.1s;",t+="    width: min(24vw,27vh);",t+="    padding: min(3vw,3vh);",t+="    font-size: 4vh;",t+="    border-radius: min(2vh,2vw);",t+="    border: min(1vw, 1vh) white solid;",t+="}",t+=".splahContainer .startButton:hover {",t+="    transform: translate(-50%, -50%) scale(1.1);",t+="    background-color: rgb(255 217 104);",t+="}";var s=document.createElement("style");s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(s);var i=document.createElement("div");e.color&&(i.style.backgroundColor=e.color),i.className="splahContainer";var a=document.createElement("div");a.textContent=o[l()].play,a.className="startButton",i.appendChild(a);var u=document.createElement("div");u.className="gameIcon",e.icon&&(u.style.backgroundImage="url("+e.icon+")"),i.appendChild(u),document.body.appendChild(i),a.onclick=function(){afterBreakCallbackCalled=!1;let t=setTimeout(function(){afterBreakCallbackCalled||(afterBreakCallbackCalled=!0,e.afterBreak&&e.afterBreak())},n);try{adBreak(r({type:"start",name:e.name||"splash_screen",beforeBreak:function(){clearTimeout(t)},afterBreak:function(){afterBreakCallbackCalled||(afterBreakCallbackCalled=!0,e.afterBreak&&e.afterBreak())}}))}catch(s){c(s,e)}setTimeout(function(){document.body.removeChild(i)},200)}}},a.prototype.onNext=function(e){(e=e||{}).type="next",this.adBreak(e)},a.prototype.onBrowse=function(e){(e=e||{}).type="browse",this.adBreak(e)},a.prototype.onPause=function(e){(e=e||{}).type="pause",this.adBreak(e)},a.prototype.adBreak=function(e){if("next"!==(e=e||{}).type&&"browse"!==e.type&&"pause"!==e.type)return console.error("H5ad: unknown type",e.type);let t=setTimeout(function(){e.noBreak&&e.noBreak()},n);try{adBreak(r({type:e.type,name:e.name||e.type,beforeBreak:function(){clearTimeout(t),e.beforeBreak&&e.beforeBreak()},afterBreak:function(){e.afterBreak&&e.afterBreak()}}))}catch(s){c(s,e)}},a.prototype.onMute=function(){adConfig({sound:"off"})},a.prototype.onUnmute=function(){adConfig({sound:"on"})},t.exports=new a},{}],Cell:[function(e,t){"use strict";cc._RF.push(t,"65be15nfR9GbY7TfqQS5enR","Cell"),cc.Class({extends:cc.Component,properties:{button:cc.Button,chessSprite:cc.Sprite,chessTextures:[cc.SpriteFrame],wrongNode:cc.Node,position:cc.Vec2,status:null,positionLabel:cc.Label},setData:function(e,t){this.position.x=e,this.position.y=t},setChess:function(e){this.status=e,this.chessSprite.spriteFrame=this.chessTextures[e]},showHint:function(){this.chessSprite.spriteFrame=this.chessTextures[2]},hideHint:function(){this.chessSprite.spriteFrame=null},clearChess:function(){this.chessSprite.node.active=!1,this.status=null},animateWrongCell:function(){cc.tween(this.wrongNode).to(.15,{opacity:{value:255,easing:"sineIn"}}).delay(.15).to(.15,{opacity:{value:0,easing:"sineOut"}}).start()}}),cc._RF.pop()},{}],GlobalData:[function(e,t){"use strict";cc._RF.push(t,"b1aa52f9fhHlK3w1RgB2SUM","GlobalData");var s=cc.Enum({BLACK:0,WHITE:1}),i=cc.Enum({EASY:0,NORMAL:1,HARD:2});t.exports={CELL_STATUS:s,MODE_GAME:i},cc._RF.pop()},{}],HintButton:[function(e,t){"use strict";cc._RF.push(t,"9c23b5XBMZLIaWulZ2Kj/+y","HintButton"),cc.Class({extends:cc.Component,properties:{buttonSprite:cc.Sprite,buttonTextures:[cc.SpriteFrame],clickSound:cc.AudioClip},onLoad:function(){var e=cc.sys.localStorage.getItem("hintConfig")||1;this.buttonSprite.spriteFrame=this.buttonTextures[e]},onButtonClicked:function(){var e=cc.sys.localStorage.getItem("soundConfig")||1;cc.audioEngine.play(this.clickSound,!1,e);var t=1==(cc.sys.localStorage.getItem("hintConfig")||1)?0:1;cc.sys.localStorage.setItem("hintConfig",t),this.buttonSprite.spriteFrame=this.buttonTextures[t]}}),cc._RF.pop()},{}],IngameScene:[function(e,t){"use strict";cc._RF.push(t,"41ca6i+HA9Ooqx0Sr36WHSO","IngameScene");var s=e("./component/Cell"),i=e("./config/GlobalData"),o=e("../Script/utils");cc.Class({extends:cc.Component,properties:{gridNode:cc.Node,cellPrefab:cc.Prefab,gameInfoLabel:cc.Label,whiteScoreLabel:cc.Label,blackScoreLabel:cc.Label,dimBackground:cc.Node,dimLabel:cc.Label,dimLock:cc.BlockInputEvents,resultLayer:cc.Node,resultTitleLabel:cc.Label,resultPlayerScoreLabel:cc.Label,resultComputerScoreLabel:cc.Label,victoryNode:cc.Node,gameOverNode:cc.Node,clickSound:cc.AudioClip,chessSound:cc.AudioClip,wrongSound:cc.AudioClip,winSound:cc.AudioClip,loseSound:cc.AudioClip,bgmAudioClip:cc.AudioClip},onLoad:function(){this.initGrid(),this.prepareChessBoard()},start:function(){cc.audioEngine.playMusic(this.bgmAudioClip,!0),this.startGame()},initGrid:function(){this._cell=new Array(8);for(var e=0;e<this._cell.length;e++)this._cell[e]=new Array(8);for(var t=7;t>=0;t--)for(var i=0;i<8;i++){var o=cc.instantiate(this.cellPrefab),n=o.getComponent(s);n.setData(i,t);var a=new cc.Component.EventHandler;a.target=this.node,a.component="IngameScene",a.handler="onCellClicked",a.customEventData=n,o.getComponent(cc.Button).clickEvents.push(a),this.gridNode.addChild(o),this._cell[i][t]=n}},prepareChessBoard:function(){this._cell[3][3].setChess(i.CELL_STATUS.BLACK),this._cell[4][4].setChess(i.CELL_STATUS.BLACK),this._cell[3][4].setChess(i.CELL_STATUS.WHITE),this._cell[4][3].setChess(i.CELL_STATUS.WHITE)},prepareCustomChessBoard:function(){this._cell[6][5].setChess(i.CELL_STATUS.BLACK),this._cell[1][6].setChess(i.CELL_STATUS.BLACK),this._cell[4][5].setChess(i.CELL_STATUS.WHITE),this._cell[2][5].setChess(i.CELL_STATUS.WHITE),this._cell[5][5].setChess(i.CELL_STATUS.WHITE),this._cell[2][2].setChess(i.CELL_STATUS.WHITE),this._cell[5][2].setChess(i.CELL_STATUS.WHITE)},rollPlayerTurn:function(){return Math.random()<.5},animatePlayerTurnAnim:function(e,t){this.gameInfoLabel.string=e?"\u30d7\u30ec\u30fc\u30e4\u30fc":"\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc",cc.tween(this.gameInfoLabel.node).to(.25,{scale:{value:1.2,easing:"sineIn"}}).to(.35,{scale:{value:1,easing:"sineOut"}}).call(function(){t&&t()}).start()},animateLostTurnAnim:function(e,t){var s=this;this.setChessBoardStatus(!1),this.dimLabel.string=e?"\u3042\u306a\u305f\u306f\u30bf\u30fc\u30f3\u3092\u5931\u3063\u305f":"\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u30b9\u30ad\u30c3\u30d7\u30bf\u30fc\u30f3",cc.tween(this.dimBackground).to(.5,{opacity:{value:123,easing:"sineIn"}}).delay(1.5).to(.5,{opacity:{value:0,easing:"sineOut"}}).call(function(){s.setChessBoardStatus(!0),t&&t()}).start(),cc.tween(this.dimLabel.node).delay(.5).to(.35,{opacity:{value:255,easing:"sineIn"}}).delay(.5).to(.35,{opacity:{value:0,easing:"sineOut"}}).start()},startGame:function(){this._playerSkipTurnCount=0,this._isPlayerFirst=this.rollPlayerTurn(),this._isPlayerFirst?this.processPlayerTurn():this.processComputerTurn()},processPlayerTurn:function(){var e=this;if(this.isEndGame())return this.showResult();this.animatePlayerTurnAnim(!0),this.setChessBoardStatus(!0);var t=this._isPlayerFirst?i.CELL_STATUS.BLACK:i.CELL_STATUS.WHITE,s=this.getCellPossibility(t);if(0===s.length){if(this._playerSkipTurnCount+=1,this._playerSkipTurnCount>1)return this.showResult();this.animateLostTurnAnim(!0,function(){e.processComputerTurn()})}else this._canPlayerPlay=!0,this._playerSkipTurnCount=0,1==(cc.sys.localStorage.getItem("hintConfig")||1)&&this.showPossibleCell(s)},processComputerTurn:function(){var e=this;this.setChessBoardStatus(!1),this.animatePlayerTurnAnim(!1),this._canPlayerPlay=!1;var t=this._isPlayerFirst?i.CELL_STATUS.WHITE:i.CELL_STATUS.BLACK,s=this.getCellPossibility(t);if(0===s.length)return this._playerSkipTurnCount+=1,this._playerSkipTurnCount>1?this.showResult():this.animateLostTurnAnim(!1,function(){e.processPlayerTurn()});setTimeout(function(){e._playerSkipTurnCount=0;var o=cc.sys.localStorage.getItem("gameMode")||0;if(o===i.MODE_GAME.NORMAL){var n=Math.floor(Math.random()*s.length),a=s[n].position,r=e.getPossessedChessByPosition(t,a);e._cell[a.x][a.y].setChess(t),e.updateCell(r,t)}else if(o===i.MODE_GAME.HARD){var c=s[0].position,l=e.getPossessedChessByPosition(t,c);e._cell[c.x][c.y].setChess(t),e.updateCell(l,t)}else{var u=Math.floor(Math.random()*s.length),d=s[u].position,h=e.getPossessedChessByPosition(t,d);e._cell[d.x][d.y].setChess(t),e.updateCell(h,t)}e.playSound(e.chessSound),e.updateScore(),e.processPlayerTurn()},1500)},setChessBoardStatus:function(e){this.dimLock.node.active=!e},onCellClicked:function(e,t){if(null===t.status&&this._canPlayerPlay){var s=this._isPlayerFirst?i.CELL_STATUS.BLACK:i.CELL_STATUS.WHITE,o=this.getPossessedChessByPosition(s,t.position);if(o.length>0){if(t.setChess(s),this.updateScore(),this.playSound(this.chessSound),this.updateCell(o,s),this.hidePossibleCell(),this.isEndGame())return this.showResult();this.processComputerTurn()}else this.playSound(this.wrongSound,!1,.6),t.animateWrongCell()}},updateCell:function(e,t){for(var s=0;s<e.length;s++)e[s].setChess(t)},getCellPossibility:function(e){for(var t=[],s=0;s<8;s++)for(var i=0;i<8;i++){var o=this._cell[i][s];if(null===o.status){var n=this.getPossessedChessByPosition(e,o.position);if(0!==n.length){var a={position:o.position,totalPossessedChess:n.length};t.push(a)}}}return t.sort(function(e,t){return t.totalPossessedChess-e.totalPossessedChess}),t},getPossessedChessByPosition:function(e,t){var s=this.getPossessedChessByDirection(e,t,cc.Vec2(-1,0)),i=this.getPossessedChessByDirection(e,t,cc.Vec2(1,0)),o=this.getPossessedChessByDirection(e,t,cc.Vec2(0,1)),n=this.getPossessedChessByDirection(e,t,cc.Vec2(0,-1)),a=this.getPossessedChessByDirection(e,t,cc.Vec2(1,1)),r=this.getPossessedChessByDirection(e,t,cc.Vec2(1,-1)),c=this.getPossessedChessByDirection(e,t,cc.Vec2(-1,-1)),l=this.getPossessedChessByDirection(e,t,cc.Vec2(-1,1));return[].concat(s,i,o,n,a,r,c,l)},getPossessedChessByDirection:function(e,t,s){var i=[],o=[],n=t.clone();for(n.addSelf(s);this.isInChessBoard(n);){var a=this._cell[n.x][n.y];if(null===a.status)break;if(a.status===e){if(0===i.length)break;if(o.push(a),1===o.length)break}else i.push(a);if(2===o.length&&i.length>0)break;n.addSelf(s)}return 0===o.length&&i.length>0&&(i.length=0),i},showPossibleCell:function(e){for(var t=0;t<e.length;t++){var s=e[t].position;this._cell[s.x][s.y].showHint()}},hidePossibleCell:function(){for(var e=0;e<8;e++)for(var t=0;t<8;t++){var s=this._cell[t][e];null===s.status&&s.hideHint()}},isInChessBoard:function(e){return e.x>=0&&e.x<8&&e.y>=0&&e.y<8},isEndGame:function(){for(var e=0;e<8;e++)for(var t=0;t<8;t++)if(null===this._cell[t][e].status)return!1;return!0},showResult:function(){var e=this;setTimeout(function(){e.setChessBoardStatus(!1);var t=e._isPlayerFirst?i.CELL_STATUS.BLACK:i.CELL_STATUS.WHITE,s=e._isPlayerFirst?i.CELL_STATUS.WHITE:i.CELL_STATUS.BLACK,o=e.getScoreByChessType(),n=s===i.CELL_STATUS.WHITE?o.whiteScore:o.blackScore,a=t===i.CELL_STATUS.BLACK?o.blackScore:o.whiteScore;e.resultLayer.active=!0,a>n?(e.victoryNode.active=!0,e.gameOverNode.active=!1,e.playSound(e.winSound,!1,.75)):a<n?(e.victoryNode.active=!1,e.gameOverNode.active=!0,e.playSound(e.loseSound,!1,.75)):(e.victoryNode.active=!1,e.gameOverNode.active=!1,e.playSound(e.loseSound,!1,.75)),e.resultPlayerScoreLabel.string=""+a,e.resultComputerScoreLabel.string=""+n,cc.tween(e.resultLayer).to(1.5,{opacity:{value:255,easing:"sineIn"}}).start(),cc.audioEngine.stopMusic()},1500)},getScoreByChessType:function(){for(var e=0,t=0,s=0;s<8;s++)for(var o=0;o<8;o++){var n=this._cell[o][s];null!==n.status&&(n.status!==i.CELL_STATUS.WHITE?n.status===i.CELL_STATUS.BLACK&&(t+=1):e+=1)}return{whiteScore:e,blackScore:t}},updateScore:function(){var e=this.getScoreByChessType();this.whiteScoreLabel.string=e.whiteScore,this.blackScoreLabel.string=e.blackScore},onReplayClicked:function(){var e=this;this.playSound(this.clickSound),o.showAds("next",!0,function(){e.restartGame()})},restartGame:function(){cc.director.loadScene("landing"),window.isQuickPlay=!0},resetGame:function(){cc.director.loadScene("ingame")},playSound:function(e,t,s){void 0===t&&(t=!1),void 0===s&&(s=1);var i=cc.sys.localStorage.getItem("soundConfig")||1;cc.audioEngine.play(e,t,i*s)}}),cc._RF.pop()},{"../Script/utils":"utils","./component/Cell":"Cell","./config/GlobalData":"GlobalData"}],LandingScene:[function(e,t){"use strict";cc._RF.push(t,"f81c9Et825BE4flcrHLshzh","LandingScene");var s=e("h5ad"),i=e("../Script/utils");cc.Class({extends:cc.Component,properties:{clickSound:cc.AudioClip,bgmAudioSource:cc.AudioSource,bgmAudioClip:cc.AudioClip,playBtn:cc.Node,normalBtn:cc.Node,hardBtn:cc.Node,loading:cc.Node},onLoad:function(){s.onStart({icon:i.getResourceUrl("icon"),color:"rgb(255 226 128)",afterBreak:this.afterSplash.bind(this)})},afterSplash:function(){cc.audioEngine.playMusic(this.bgmAudioClip,!0)},start:function(){window.isQuickPlay&&(cc.audioEngine.playMusic(this.bgmAudioClip,!0),this.normalBtn.active=!0,this.hardBtn.active=!0,this.playBtn.active=!1)},onPlayButtonClicked:function(){var e=this;this.playSound(this.clickSound),setTimeout(function(){e.normalBtn.active=!0,e.hardBtn.active=!0,e.playBtn.active=!1},200)},onSelectMode:function(e,t){this.loading.active=!0,cc.sys.localStorage.setItem("gameMode",t),cc.director.loadScene("ingame"),this.playSound(this.clickSound),cc.audioEngine.stopMusic()},playSound:function(e){var t=cc.sys.localStorage.getItem("soundConfig")||1;cc.audioEngine.play(e,!1,t)}}),cc._RF.pop()},{"../Script/utils":"utils",h5ad:1}],SoundButton:[function(e,t){"use strict";cc._RF.push(t,"24a54bdozpLr5Yhy4FCGR0/","SoundButton");var s=e("../Script/utils");cc.Class({extends:cc.Component,properties:{buttonSprite:cc.Sprite,buttonTextures:[cc.SpriteFrame],clickSound:cc.AudioClip},onLoad:function(){var e=cc.sys.localStorage.getItem("soundConfig")||1;this.buttonSprite.spriteFrame=this.buttonTextures[e],this.setSoundConfig(e)},onSoundButtonClicked:function(){var e=cc.sys.localStorage.getItem("soundConfig")||1;cc.audioEngine.play(this.clickSound,!1,e);var t=1==e?0:1;cc.sys.localStorage.setItem("soundConfig",t),this.buttonSprite.spriteFrame=this.buttonTextures[t],this.setSoundConfig(t)},setSoundConfig:function(e){1==e?(cc.audioEngine.setMusicVolume(1),s.unMuteAds()):(cc.audioEngine.setMusicVolume(0),s.muteAds())}}),cc._RF.pop()},{"../Script/utils":void 0}],TutorialButton:[function(e,t){"use strict";cc._RF.push(t,"dc1e32XzSFJtaJ8cK5VbQ0A","TutorialButton"),cc.Class({extends:cc.Component,properties:{tutorialLayer:cc.Node,isShow:!1,clickSound:cc.AudioClip},onTutorialClicked:function(){var e=cc.sys.localStorage.getItem("soundConfig")||1;cc.audioEngine.play(this.clickSound,!1,e),this.tutorialLayer.active=!this.isShow,this.isShow=!this.isShow}}),cc._RF.pop()},{}],utils:[function(e,t){"use strict";cc._RF.push(t,"27b29Ug+0xH9oNXSEcUoqUn","utils");var s=e("h5ad");t.exports={showAds:function(e,t,i){s.adBreak({type:e,beforeBreak:function(){t&&(cc.director.pause(),cc.audioEngine.pauseAll())},afterBreak:function(){t&&(cc.director.resume(),cc.audioEngine.resumeAll()),i&&i()},noBreak:function(){i&&i()}})},muteAds:function(){return s.onMute()},unMuteAds:function(){return s.onUnmute()},getResourceUrl:function(e){var t=cc.resources.getInfoWithPath(e),s=t.uuid;return t.nativeVer&&(s+="."+t.nativeVer),"./assets/resources/native/"+s.substr(0,2)+"/"+s+".png"}},cc._RF.pop()},{h5ad:1}]},{},["IngameScene","LandingScene","Cell","HintButton","SoundButton","TutorialButton","GlobalData","utils"]);